@{
    ViewBag.Title = "Конструктор запросов";
}
<!DOCTYPE html>

<div class="jumbotron">

    <form action="GetParams" method="post" class="needs-validation" novalidate>
        <div class="form-row">
            <div class="form-group col-md-3">
                <label><input type="checkbox" class="form-check-input" name="yearCheck">Год выпуска:</label>
            </div>
            <div class="form-group col-md-4">
                <input type="number" class="form-control" name="minYear" min="1900" max="2020" maxlength="4" placeholder="Начало периода">
                <div class="invalid-feedback">
                    Значение должно быть между 1900 и 2020 годами.
                </div>
            </div>
            <div class="form-group col-md-4">
                <input type="number" class="form-control" name="maxYear" min="1900" max="2020" maxlength="4" placeholder="Конец периода">
                <div class="invalid-feedback">
                    Значение должно быть между годом начала и 2020 годами.
                </div>
            </div>
        </div>

        <div class="form-row input-group-lg">
            <div class="form-group col-md-3">
                <label><input type="checkbox" class="form-check-input" name="sourceCheck">Название источника:</label>
            </div>
            <div class="form-group col-md-4">
                <input type="text" class="form-control" name="source" maxlength="50" placeholder="Введите название источника">
                <div class="invalid-feedback">
                    Текст должен быть не больше 50 символов.
                </div>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group col-md-3">
                <label><input type="checkbox" class="form-check-input" id="numCheck" name="numCheck">Количество авторов:</label>
            </div>
            <div class="form-group col-md-4">
                <input type="number" class="form-control" name="num" min="1" max="20" placeholder="Введите количество авторов">
                <div class="invalid-feedback">
                    Количество не должно превышать 20.
                </div>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group col-md-3">
                <label><input type="checkbox" class="form-check-input" name="wordCheck">Ключевые слова:</label>
            </div>
            <div class="form-group col-md-4">
                <input type="text" class="form-control" name="word" maxlength="50" placeholder="Введите слова через ,">
                <div class="invalid-feedback">
                    Текст должен быть не больше 50 символов.
                </div>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group col-md-3">
                <label><input type="checkbox" class="form-check-input" name="chapterCheck">Конференция</label>
                <label><input type="checkbox" class="form-check-input" name="articleCheck">Журнал</label>
                <label><input type="checkbox" class="form-check-input" name="uniqueCheck">Уникальные</label>
            </div>
        </div>

        <div class="form-row">
            <button type="submit" class="btn btn-outline-success btn-lg btn-block">Сгенерировать запрос</button>
        </div>
    </form>
    <script>

        var form = document.querySelector('.needs-validation');

        form.addEventListener('submit', function (event) {
            var min = Number(form[1].value);
            var max = Number(form[2].value);

            if (!form.checkValidity() || (min > max)) {
                event.preventDefault();
                event.stopPropagation();

                if (min > max && max !== 0) {
                    if (!form[2].classList.contains('is-invalid')) {
                        form[2].classList.add('is-invalid');
                    }
                }
            }
            form.classList.add('was-validated');
        })
    </script>
</div>
